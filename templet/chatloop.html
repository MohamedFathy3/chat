<!DOCTYPE html>
<html lang="ar">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ø±Ø¯Ø´Ø© Ø¨Ø³ÙŠØ·Ø©</title>
    <meta http-equiv="refresh" content="15">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet"> 
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">


    <!-- Ø¥Ø¶Ø§ÙØ© Bootstrap Icons -->
     <link rel="stylesheet" href="{% static 'chat/css/stylechat.css' %}">
<!-- bakend -->


<!-- endbakend -->
    <style>

   
        /* ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ */
        body.night-mode {
            background-color: #2b2a2a;
            color: #0c0c0c;
        }
        body.night-mode .chat-container,
        body.night-mode .people-list {
            background-color: #444;
            border-color: #ffffff;
        }
        body.night-mode .chat-box {
            background-color: #555;
            border-color: #666;
        }
        body.night-mode .message.user .text {
            background-color: #00a344;
        }
        body.night-mode .message.other .text {
            background-color: #888;
        }
        body.night-mode .input-area input {
            background-color: #555;
            border-color: #666;
            color: #fff;
        }
        body.night-mode .input-area button,
        body.night-mode .record-btn {
            background-color: #e6431e;
            color: #fff;
        }

        /* Ø¥Ø®ÙØ§Ø¡ ÙˆØ¸Ù‡ÙˆØ± Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª */
        .emoji-picker, .decorated-words {
            display: none;
            position: absolute;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            width: 200px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        
        .emoji-picker span, .decorated-words span {
            font-size: 20px;
            cursor: pointer;
            margin: 5px;
            display: block;
        }

        .emoji-picker span:hover, .decorated-words span:hover {
            background-color: #f0f0f0;
            border-radius: 5px;
        }

       a{
        text-decoration: none;
       }
        .message {
            background-color: #f1f1f1;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 10px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .message strong {
            color: #007bff;
        }

        .message img {
            max-width: 100%;
            border-radius: 10px;
        }

        .message small {
            color: #6c757d;
            font-size: 0.8rem;
        }

        /* ØªØ®ØµÙŠØµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø³Ù„Ø© Ù…Ù† Ø§Ù„Ø²Ø§Ø¦Ø± */
        .guest-message {
            background-color: #d1e7dd;
            border-left: 4px solid #28a745;
        }

        /* ØªØ®ØµÙŠØµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø³Ù„Ø© Ù…Ù† Ø§Ù„Ø¹Ø¶Ùˆ */
        .customer-message {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
        }

        #messages {
            max-height: 500px;
            overflow-y: auto;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .chat-input {
            display: flex;
            align-items: center;
        }

        .chat-input textarea {
            width: 80%;
            border-radius: 10px;
            padding: 10px;
            margin-right: 10px;
        }

        .chat-input button {
            width: 15%;
            padding: 10px;
            border-radius: 10px;
            background-color: #007bff;
            color: white;
            border: none;
        }
      
        
        

      
        /* ØªÙ†Ø³ÙŠÙ‚ ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
        .alert-custom {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
            width: 300px;
        }

        .alert-custom .alert {
            border-radius: 10px;
            padding: 15px;
        }

             /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
             .settings-modal {
            position: fixed;
            top: 100px;
            left: 200px;
            right: 0;
            bottom: 0;
            
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .settings-content {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 600px;
           
         
        }
        .siteng-body{
            width: 100%;
            height: 500px; 
            overflow-y: scroll;
        }
        .siteng-body::-webkit-scrollbar{
            width: 0;
            background-color: transparent;
        }
        .siteng-body::-webkit-scrollbar-thumb{
            width: 0;
            background-color: transparent;
        }

        .settings-content h5 {
            margin-bottom: 20px;
        }

        .settings-content button {
            width: 100%;
            margin-top: 10px;
        }

        /* Ù†Ù…Ø· Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„Ù…Ø¯Ø§Ø®Ù„ */
        .input-field {
            width: 100%;
            margin-bottom: 10px;
        }

        /* ØªØ®ØµÙŠØµ Ù†Ù…Ø· Ø§Ù„Ù†ØµÙˆØµ Ø¨Ø¹Ø¯ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
        .custom-name {
            font-weight: bold;
        }
        .custom-status {
            font-style: italic;
        }

        .message {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
        }

        .message.user {
            background-color: #e0e0e0;
        }

        .message.admin {
            background-color: #d0f0c0;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø²Ø± Ø§Ù„Ø­ÙØ¸ */
        #saveSettingsButton {
            margin-top: 10px;
        }
            /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ù…ØªØ­Ø±Ùƒ */
            .marquee {
            width: 100%; /* Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±ÙŠØ· */
            overflow: hidden; /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Øµ Ø¹Ù†Ø¯ ØªØ¬Ø§ÙˆØ²Ù‡ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ø±ÙŠØ· */
            background-color: #f8f9fa; /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ø´Ø±ÙŠØ· */
            padding: 10px 0; /* ØªØ¨Ø§Ø¹Ø¯ Ø§Ù„Ù†Øµ Ø¹Ù† Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ø±ÙŠØ· */
            box-sizing: border-box;
        }

        .marquee-text {
            display: inline-block;
            white-space: nowrap; /* Ù…Ù†Ø¹ Ø§Ù„Ù†Øµ Ù…Ù† Ø§Ù„Ø§Ù†ÙƒØ³Ø§Ø± Ø¥Ù„Ù‰ Ø£ÙƒØ«Ø± Ù…Ù† Ø³Ø·Ø± */
            animation: moveText 10s linear infinite; /* ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ø±ÙƒØ© */
            font-size: 18px; /* Ø­Ø¬Ù… Ø§Ù„Ø®Ø· */
            color: #007bff; /* Ù„ÙˆÙ† Ø§Ù„Ù†Øµ */
            font-weight: bold; /* Ø¬Ø¹Ù„ Ø§Ù„Ù†Øµ Ø¹Ø±ÙŠØ¶ */
        }
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f7fa;
            padding: 20px;
        }

        .members-list {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 800px;
            margin: 0 auto;
        }

        .members-list h3 {
            text-align: center;
            font-size: 26px;
            margin-bottom: 30px;
            color: #007bff;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .member-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            background-color: #f8f9fa;
            transition: all 0.3s ease-in-out;
            font-size: 18px;
            box-shadow: 0 1px 10px rgba(0, 0, 0, 0.1);
        }

        .member-item:hover {
            background-color: #f1f1f1;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-5px);
            cursor: pointer;
        }

        .member-item .icon {
            margin-left: 10px;
            font-size: 22px;
        }

        .superuser-item {
            background: linear-gradient(135deg, #ff4b5c, #f07167);
            color: white;
            font-weight: bold;
        }

        .regular-member {
            background-color: #28a745;
            color: white;
            font-weight: bold;
        }

        .ghost-member {
            background-color: #6c757d;
            color: white;
        }

        .hidden-member {
            background-color: #ffc107;
            color: white;
            font-weight: bold;
        }

        .empty-message {
            text-align: center;
            color: #888;
            font-size: 18px;
            font-style: italic;
        }

        /* ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .btn-action {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: #007bff;
            color: white;
            font-size: 16px;
            padding: 8px 16px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .btn-action:hover {
            background-color: #0056b3;
        }

        .btn-action .icon {
            margin-left: 8px;
        }

        /* ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ø±ÙƒØ© Ù„Ù„Ù†Øµ */
        @keyframes moveText {
            0% {
                transform: translateX(100%); /* Ø¨Ø¯Ø¡ Ø§Ù„Ø­Ø±ÙƒØ© Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† */
            }
            100% {
                transform: translateX(-100%); /* Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± */
            }
        }
    </style>
</head>
<body  style="background-color: {{ style.background_color }};">
<nav class="bg-dark col-12">
    <div class="col-12 text-white px-5 py-2">
        <h6>{{ room.name }}</h6>
    </div>
</nav>
<nav class="bg-light col-12">
    <div class="marquee col-12">
        <div class="marquee-text w-100">
            {{ room.description }}
        </div>
    </div>
</nav>
<div class="container d-flex flex-row-reverse justify-content-center grid-gap gap-3 my-5" style="background-color: {{ style.background_color }}; font-family: {{ style.font_family }}; font-size: {{ style.font_size }}px; color: {{ style.font_color }};">
    <!-- Ù‚Ø³Ù… Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† -->
    <div class="col-md-3 d-none d-lg-block col-lg-3 p-3 bg-light rounded shadow-sm">
        <!-- Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ø²Ø§Ø¦Ø± -->
        <div class="list-unstyled rounded-top-3 pb-3">
            <li class="d-flex justify-content-between align-items-center py-3 px-4 border-bottom">
                {% if request.user.is_authenticated %}
                    <!-- Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„Ø§Ù‹ -->
                    <div class="d-flex align-items-center">
                        <img src="{% if customer.avatar %}{{ customer.avatar.url }}{% else %}{{ STATIC_URL }}images/default-avatar.png{% endif %}" alt="Avatar" width="50" class="rounded-circle shadow-sm">
                        <div class="ms-3">
                            <p class="text-muted mb-0" style="font-weight: 600;">Ø£Ù†Øª Ø¹Ø¶Ùˆ: <span class="text-dark">{{ request.user.username }}</span></p>
                            <small class="text-muted">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…</small>
                        </div>
                    </div>
                {% else %}
                    <!-- Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø²Ø§Ø¦Ø±Ù‹Ø§ -->
                    {% if guest %}
                        <div class="d-flex align-items-center">
                            <img src="{{ customer.avatar.url }}" alt="Avatar" width="50" class="rounded-circle shadow-sm">
                            <div class="ms-3">
                                <p class="text-muted mb-0" style="font-weight: 600;">Ø£Ù†Øª Ø²Ø§Ø¦Ø±: <span class="text-dark">{{ guest.name }}</span></p>
                                <small class="text-muted">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹</small>
                            </div>
                        </div>
                    {% else %}
                        <div class="d-flex align-items-center">
                            <img src="{{ STATIC_URL }}images/default-avatar.png" alt="Avatar" width="50" class="rounded-circle shadow-sm">
                            <div class="ms-3">
                                <p class="text-muted mb-0" style="font-weight: 600;">Ø£Ù†Øª Ø²Ø§Ø¦Ø± Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù….</p>
                                <small class="text-muted">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹</small>
                            </div>
                        </div>
                    {% endif %}
                {% endif %}
            </li>
        </div>
        
    
        <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
        <ul class="nav nav-tabs d-flex" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="rooms-tab" data-bs-toggle="tab" href="#rooms" role="tab" aria-controls="rooms" aria-selected="true">Ø§Ù„ØºØ±Ù</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="users-guests-tab" data-bs-toggle="tab" href="#users-guests" role="tab" aria-controls="users-guests" aria-selected="false">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† </a>
            </li>
        </ul>
    
        <div class="tab-content mt-3" id="myTabContent">
            <!-- Ø¹Ø±Ø¶ Ø§Ù„ØºØ±Ù -->
            <div class="tab-pane fade show active" id="rooms" role="tabpanel" aria-labelledby="rooms-tab">
                <h5 class="text-primary">Ø§Ù„ØºØ±Ù</h5>
                <ul class="list-unstyled" style="overflow-y: auto; height: 250px;">
                    {% for room in rooms %}
                        <li class="d-flex justify-content-between py-2 border-bottom">
                            <span class="name">{{ room.name }}</span>
                            <a href="" class="btn btn-info btn-sm">Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
                        </li>
                    {% empty %}
                        <li class="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ ØºØ±Ù Ø­Ø§Ù„ÙŠØ§Ù‹.</li>
                    {% endfor %}
                </ul>
            </div>
    
            <!-- Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ø²ÙˆØ§Ø± Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† -->
            <div class="tab-pane fade" id="users-guests" role="tabpanel" aria-labelledby="users-guests-tab">
                <h5 class="text-primary">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ø²ÙˆØ§Ø± Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†</h5>
                <ul class="list-unstyled " style="overflow-y: auto; height: 250px;">
                    <!-- Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† -->
                    <ul class="list-group list-group-flush">
                        {% for member in members %}
                            {% if member != request.user %}
                                {% if request.user.is_superuser %}
                                    <!-- Superuser can see all members -->
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <span class="fw-bold">{{ member.user.username }}</span>
                                        <div class="col-4 d-flex grid-gap gap-2">
                                            <a href="{% url 'remove_member_from_room' slug=room.slug member_id=member.id %}" 
                                class="text-danger" onclick="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø·Ø±Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø¶ÙˆØŸ');">
                                 Ø·Ø±Ø¯
                                            </a>
                                            <a href="{% url 'user_profile' user_id=member.id %}" 
                           style="font-family: {{ style.font_family }}; font-size: {{ style.font_size }}px; color: {{ style.font_color }};">
                            <span class="name">
                                <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-user-scan"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 9a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M4 8v-2a2 2 0 0 1 2 -2h2" /><path d="M4 16v2a2 2 0 0 0 2 2h2" /><path d="M16 4h2a2 2 0 0 1 2 2v2" /><path d="M16 20h2a2 2 0 0 0 2 -2v-2" /><path d="M8 16a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2" /></svg>
                            </span></a>
                                        </div>   
                                    </li>
                                {% elif not member.is_ghost and not member.is_hidden %}
                                    <!-- Normal users can see only regular members -->
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <span class="fw-bold">{{ member.user.username }}</span>
                                        <button class="btn btn-sm btn-outline-primary">Ù…Ø±Ø§Ø³Ù„Ø©</button>
                                    </li>
                                {% elif member.is_ghost and can_see_ghost %}
                                    <!-- Member can see ghost members -->
                                    <li class="list-group-item d-flex justify-content-between align-items-center bg-secondary text-white">
                                        <span class="fw-bold">{{ member.user.username }}</span>
                                        <a href="{% url 'user_profile' user_id=member.id %}" 
                                        style="font-family: {{ style.font_family }}; font-size: {{ style.font_size }}px; color: {{ style.font_color }};">
                                         <span class="name">
                                             <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-user-scan"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 9a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M4 8v-2a2 2 0 0 1 2 -2h2" /><path d="M4 16v2a2 2 0 0 0 2 2h2" /><path d="M16 4h2a2 2 0 0 1 2 2v2" /><path d="M16 20h2a2 2 0 0 0 2 -2v-2" /><path d="M8 16a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2" /></svg>
                                         </span></a>
                                    </li>
                                {% elif member.is_hidden and can_see_hidden %}
                                    <!-- Member can see hidden members -->
                                    <li class="list-group-item d-flex justify-content-between align-items-center bg-warning text-dark">
                                        <span class="fw-bold">{{ member.user.username }}</span>
                                        <a href="{% url 'user_profile' user_id=member.id %}" 
                                        style="font-family: {{ style.font_family }}; font-size: {{ style.font_size }}px; color: {{ style.font_color }};">
                                         <span class="name">
                                             <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-user-scan"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 9a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M4 8v-2a2 2 0 0 1 2 -2h2" /><path d="M4 16v2a2 2 0 0 0 2 2h2" /><path d="M16 4h2a2 2 0 0 1 2 2v2" /><path d="M16 20h2a2 2 0 0 0 2 -2v-2" /><path d="M8 16a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2" /></svg>
                                         </span></a>
                                    </li>
                                {% endif %}
                            {% endif %}
                        {% empty %}
                            <li class="list-group-item text-center">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ø¹Ø¶Ø§Ø¡ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ØºØ±ÙØ©.</li>
                        {% endfor %}<!--Ø²ÙˆØ§Ø± Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† -->
                   
                        {% for guest in guests %}
                            <li class="d-flex justify-content-between py-2 border-bottom">
                                <img src="{% static 'chat/img/1 (6).png' %}" alt="{{ guest.name }}" width="40" class="rounded-circle">
                                <div class="d-flex justify-content-between w-100 align-items-center">
                                    <span class="name">{{ guest.name }}</span>
                                    <span class="status text-warning small">Ø²Ø§Ø¦Ø±</span>
                                </div>
                            </li>
                        {% endfor %}
                   
                </ul>
            </div>
        </div>
        <div class="col-12 d-flex flex-column gap-3">
            <!-- Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ Ù…Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->
            <div class="d-flex flex-row gap-3 align-items-center">
                {% if request.user.is_authenticated %}
                    <!-- Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³Ø¬Ù„ -->
                    <a href="{% url 'user_logout' slug=room.slug %}" class="btn btn-danger w-25">Ø®Ø±ÙˆØ¬</a>
                
                {% elif guest %}
                    <!-- Ø¹Ø±Ø¶ Ø§Ø³Ù… Ø§Ù„Ø²Ø§Ø¦Ø± Ù…Ø¹ Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬ -->
                    <p class="mb-0">Ù…Ø±Ø­Ø¨Ù‹Ø§ {{ guest.name }}</p>
                    <a href="{% url 'guest_logout' slug=room.slug %}" class="btn btn-danger w-25">Ø®Ø±ÙˆØ¬</a>
                
                {% else %}
                    <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ø²Ø§Ø¦Ø± Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù… -->
                    <p class="mb-0">Ø£Ù†Øª Ø²Ø§Ø¦Ø± Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù….</p>
                    <a href="{% url 'guest_login' slug=room.slug %}" class="btn btn-primary w-25">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ²Ø§Ø¦Ø±</a>
                {% endif %}
                
                <!-- Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
                <button class="btn btn-info w-50" id="settingsButton">
                    <i class="bi bi-gear"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </button>
            </div>
            
            <!-- Ø²Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
            <div class="d-block">
                <button class="btn btn-warning w-100" id="alertButton">
                    <i class="bi bi-bell"></i>
                    {% if notification.id %}
                        <a href="{% url 'view_notification' notification_id=notification.id %}" class="text-dark text-decoration-none">
                            Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
                        </a>
                    {% else %}
                        <p class="mb-0">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª.</p>
                    {% endif %}
                </button>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-9 col-12 h-50 p-4 bg-white rounded shadow-sm ms-3">
        <!-- Ø±Ø£Ø³ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h5 class="m-0 text-primary fw-bold">Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¨Ø§Ø´Ø±Ø©</h5>
            <button class="btn btn-link text-danger p-0" id="clearButton">Ù…Ø³Ø­ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</button>
        </div>
        
        <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ -->
        <div id="messages" class="message-box" style="max-height: 400px; overflow-y: scroll; display: flex; flex-direction: column-reverse;">
            {% for message in messages %}
                <div class="message p-3 mb-3 rounded border" style="background-color: {% if message.customer %} #f0f8ff {% else %} #f8f9fa {% endif %};">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <strong class="text-dark">
                            {% if message.customer %}
                                {{ message.customer.user.username }}
                            {% else %}
                                {{ message.guest.name }}
                            {% endif %}
                        </strong>
                        <small class="text-muted">{{ message.created_at }}</small>
                    </div>
                    <p class="mb-2 text-dark" style="font-size: 1rem;">{{ message.content }}</p>
                    
                    {% if message.image %}
                    <img src="{{ message.image.url }}" alt="ØµÙˆØ±Ø© Ù…Ø±ÙÙ‚Ø©" width="100px"/>
                    {% endif %}
                    {% if message.emoji %}
                        <span class="emoji" style="font-size: 1.5rem;">{{ message.emoji }}</span>
                    {% endif %}
                    
                    <div class="d-flex justify-content-between align-items-center mt-2">
                        <p class="mb-0 text-muted small">Likes: {{ message.likes.count }}</p>
                        
                        {% if request.user.is_authenticated %}
                            {% if message.liked_by_user %}
                                <p class="text-success small">Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨ Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</p>
                            {% else %}
                                <!-- ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù‡Ù†Ø§ Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨ Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨ -->
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
            {% empty %}
                <p class="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ø¨Ø¹Ø¯.</p>
            {% endfor %}
        </div>
        <div class="chat-input mt-4">
            <form method="POST" enctype="multipart/form-data" class="w-100 d-flex grid-gap gap-1 align-items-center px-3">
                {% csrf_token %}
             
                <textarea name="content" class="form-control w-75 " id="messageContent" placeholder="Ø£ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." ></textarea>
                <div class="col-3 d-flex grid-gap gap-2">
                    <div class="col-3">
                        <label for="imageInput" class="me-1" style="cursor: pointer;">
                            <i class="bi bi-image" style="font-size: 1.6rem; color: #5f6368;"></i>
                        </label>
                        <input type="file" name="image" class="d-none" id="imageInput" >
                    </div>
                    <div class="col-3">
                        <div class="dropdown me-1 w-100">
                            <button type="button" id="emojiButton" class="btn btn-sm w-100">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mood-smile">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                    <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"/>
                                    <path d="M9 10l.01 0"/>
                                    <path d="M15 10l.01 0"/>
                                    <path d="M9.5 15a3.5 3.5 0 0 0 5 0"/>
                                </svg>
                            </button>
                            <div id="emojiList" class="dropdown-menu p-2" style="display: none;">
                              
                                 {% for emoji in  emojis %}
                                 
                                <span class="emoji" onclick="insertEmoji('{{ emoji.symbol }}')" style="cursor: pointer;">{{ emoji.symbol }}</span>
                                 {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="dropdown me-1 w-100">
                            <button type="button" id="textButton" class="btn btn-sm w-100">
                                <svg  xmlns="http://www.w3.org/2000/svg" 
                                 width="24"  height="24"  viewBox="0 0 24 24"  
                                 fill="none"  stroke="currentColor"  
                                 stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-letter-t"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4l12 0" /><path d="M12 4l0 16" /></svg>
                            </button>
                            <div id="textList" class="dropdown-menu p-2" style="display: none;">
                              
                                 {% for text in  text %}
                                 
                                <span class="emoji" onclick="insertText('{{ text.content  }}')" style="cursor: pointer;">{{ text.content  }}</span>
                                 {% endfor %}
                            </div>
                        </div>
                    </div>    
                        <div class="col-3">
                            <button type="submit" class="btn-primary btn-sm w-100">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-send">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                    <path d="M10 14l11 -11"/>
                                    <path d="M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5"/>
                                </svg>
                            </button>
                    </div>
                </div>
            </form>
            
        </div>
        
        
    </div>
    
        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª -->
      
 
      <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© -->
      <div class="chat-window position-fixed p-3" id="chatWindow" style="display: none; max-width: 350px; width: 100%;">
        <div class="card shadow-lg">

    <!-- Ø®ÙŠØ§Ø±Ø§Øª Ù„ØªØºÙŠÙŠØ± Ù…ÙƒØ§Ù† Ø§Ù„Ù†Ø§ÙØ°Ø© -->
    <div class="d-flex justify-content-center">
        <button class="btn btn-sm" onclick="moveChatWindow('top-left')">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-up-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7l10 10" /><path d="M16 7l-9 0l0 9" /></svg>
        </button>
        <button class="btn btn-sm" onclick="moveChatWindow('top-right')">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-up-right"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M17 7l-10 10" /><path d="M8 7l9 0l0 9" /></svg>
        </button>
        <button class="btn btn-sm" onclick="moveChatWindow('bottom-left')">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-down-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M17 7l-10 10" /><path d="M16 17l-9 0l0 -9" /></svg>
        </button>
        <button class="btn btn-sm" onclick="moveChatWindow('bottom-right')">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-down-right"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7l10 10" /><path d="M17 8l0 9l-9 0" /></svg>
        </button>
    </div>
    
            <div class="card-header d-flex justify-content-between align-items-center">
                <span>Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ</span>
                <button class="btn-close" onclick="closeChatWindow()"></button>
            </div>
            <div class="card-body" id="chatBody" style="height: 300px; overflow-y: auto;">
               
            <div class="card-footer d-flex grid-gap gap-2">
                <input type="text" id="messageInput1" class="form-control me-2" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©..." />
                <button class="btn btn-warning btn-sm" onclick="toggleEmojiPicker()">ğŸ˜Š</button>
                <button class="btn btn-secondary btn-sm" onclick="toggleTextStylePicker()">ğŸ¨</button>
                <button class="btn btn-primary btn-sm" onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
          <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ -->
    <div id="emojiPicker1" class="emoji-picker" style="display: none;">
        <button class="emoji-btn btn" onclick="addEmoji('ğŸ˜Š')">ğŸ˜Š</button>
        <button class="emoji-btn btn" onclick="addEmoji('ğŸ˜‚')">ğŸ˜‚</button>
        <button class="emoji-btn btn" onclick="addEmoji('ğŸ˜')">ğŸ˜</button>
        <button class="emoji-btn btn" onclick="addEmoji('ğŸ˜¢')">ğŸ˜¢</button>
        <button class="emoji-btn btn" onclick="addEmoji('ğŸ˜')">ğŸ˜</button>
        <button class="emoji-btn btn" onclick="addEmoji('ğŸ˜¡')">ğŸ˜¡</button>
        <!-- ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ù‡Ù†Ø§ -->
    </div>
    
    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…Ø²Ø®Ø±ÙØ© -->
    <div id="textStylePicker" class="emoji-picker" style="display: none;">
        <button class="emoji-btn btn" onclick="addDecorativeText('âœ¨ Ù…Ø±Ø­Ø¨Ù‹Ø§ âœ¨')">âœ¨ Ù…Ø±Ø­Ø¨Ù‹Ø§ âœ¨</button>
        <button class="emoji-btn btn" onclick="addDecorativeText('ğŸŒŸ ÙƒÙŠÙ Ø­Ø§Ù„ÙƒØŸ ğŸŒŸ')">ğŸŒŸ ÙƒÙŠÙ Ø­Ø§Ù„ÙƒØŸ ğŸŒŸ</button>
        <button class="emoji-btn btn" onclick="addDecorativeText('ğŸ’– Ø£Ø­Ø¨Ùƒ ğŸ’–')">ğŸ’– Ø£Ø­Ø¨Ùƒ ğŸ’–</button>
        <button class="emoji-btn btn" onclick="addDecorativeText('ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§ ğŸ‰')">ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§ ğŸ‰</button>
        <!-- ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…Ø²Ø®Ø±ÙØ© Ù‡Ù†Ø§ -->
    </div>
    
    </div>
</div>
</div>
 <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
<div class="settings-modal" id="settingsModal">
    <div class="settings-content shadow-lg rounded p-4">
        <div class="d-flex justify-content-between align-items-center">
            <h5>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h5>
            {% if user.is_authenticated %}
            <div>
                <a href="javascript:void(0);" onclick="openWindow('{% url 'edit-profile' %}?room_slug={{ room.slug }}')" class="btn btn-primary btn-sm mb-2">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</a>
                <br>
                <a href="javascript:void(0);" onclick="openWindow('{% url 'edit-style' %}?room_slug={{ room.slug }}')" class="btn btn-secondary btn-sm">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù†Ù…Ø§Ø·</a>
            </div>
            {% else %}
            <div class="alert alert-warning" role="alert">
                <h5>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª</h5>
            </div>
            {% endif %}
        </div>

        <!-- Modal for Settings -->
        <div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="settingsModalLabel">ØªØ®ØµÙŠØµ Ø§Ù„Ù†Ù…Ø·</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ®ØµÙŠØµ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„Ø¹Ø§Ù… Ù„Ù„ØºØ±ÙØ©.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Ø¥ØºÙ„Ø§Ù‚</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø²Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
        <button class="btn btn-danger mt-3" id="closeSettingsButton">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
    </div>
</div>

</div>

<!-- ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ -->
<div class="alert-custom" id="alertMessage">
    <div class="alert alert-info" role="alert">
       <ul>
    {% for notification in notifications %}
        <li>
            <p>Ù„Ø¯ÙŠÙƒ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©: {{ notification.message.content }}</p>
            <a href="{% url 'mark_notification_as_read' notification.id %}">Ù…Ø§Ø±Ùƒ ÙƒÙ€ "Ù…Ù‚Ø±ÙˆØ¡"</a>
        </li>
    {% endfor %}
</ul>

    </div>
</div>

<footer class="bg-light py-3 col-12">
    <div class="col-11">
        <div class="row d-flex justify-content-between align-items-center px-5">
            <div class="col-5">
               
        {% if room.imge %}
        <div class="room-image">
            <img src="{{ room.imge.url }}" alt="{{ room.name }}" width="300">
        </div>
    {% else %}
        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ±Ø© Ù„Ù„ØºØ±ÙØ©</p>
    {% endif %}
            </div>
            <div class="col-5 d-flex flex-row-reverse">
             <img src="{% static 'chat/img/plus.gif' %}" width="80">
            </div>
        </div>
    </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'chat/js/jschat.js' %}"></script>
<script src="{% static 'chat/js/sitteing.js' %}"></script>
<script src="{% static 'chat/js/button.js' %}"></script>
<script>
    $(document).ready(function() {
        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        $('#sendButton').click(function() {
            var message = $('#messageInput').val();
            if (message.trim() !== '') {
                var currentTime = new Date().toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});
                var messageHTML = `
                    <div class="message user">
                        <div class="text">${message}</div>
                        <div class="time">${currentTime}</div>
                    </div>
                `;
                $('#chatBox').append(messageHTML);
                $('#messageInput').val(''); // Ù…Ø³Ø­ Ø§Ù„Ù…Ø¯Ø®Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
                $('#chatBox').scrollTop($('#chatBox')[0].scrollHeight); // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ø£Ø³ÙÙ„ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            }
        });

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
        $('#messageInput').keypress(function(event) {
            if (event.which === 13) {
                $('#sendButton').click();
            }
        });

        // Ù…Ø³Ø­ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
        $('#clearButton').click(function() {
            $('#chatBox').empty();
        });

        // Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª
        $('#emojiButton').click(function() {
            $('#emojiPicker').toggle();
            $('#decoratedWordsList').hide(); // Ø¥Ø®ÙØ§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø²Ø®Ø±ÙØ©
        });

        // Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø²Ø®Ø±ÙØ© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø²Ø®Ø±ÙØ©
        $('#decorateButton').click(function() {
            $('#decoratedWordsList').toggle();
            $('#emojiPicker').hide(); // Ø¥Ø®ÙØ§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª
        });

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ù†Øµ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø±Ù‡
        $('#emojiPicker .emoji').click(function() {
            var emoji = $(this).data('emoji');
            $('#messageInput').val($('#messageInput').val() + emoji);
            $('#emojiPicker').hide(); // Ø¥Ø®ÙØ§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
        });

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø²Ø®Ø±ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù†Øµ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø±Ù‡
        $('.decorated-word').click(function() {
            var decoratedWord = $(this).text();
            $('#messageInput').val(decoratedWord);
            $('#decoratedWordsList').hide(); // Ø¥Ø®ÙØ§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø²Ø®Ø±ÙØ© Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
        });

        // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ¶Ø¹ÙŠÙ†
        $('#toggleModeButton').click(function() {
            $('body').toggleClass('night-mode');
            $(this).text($('body').hasClass('night-mode') ? 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ' : 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ');
        });
        function exitChat() {
        $('#chatWindow').hide();  // Ø¥Ø®ÙØ§Ø¡ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø´Ø§Øª
        $('#chatBox').empty(); }
    
    });
       // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ØªØ¹Ø¨ÙŠØ±ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
       document.getElementById('emojiButton').addEventListener('click', function () {
        var emojiList = document.getElementById('emojiList');
        emojiList.style.display = emojiList.style.display === 'block' ? 'none' : 'block';
    });

    // Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ø±Ù…Ø² Ø§Ù„ØªØ¹Ø¨ÙŠØ±ÙŠ ÙÙŠ Ø§Ù„Ù€ textarea
    function insertEmoji(emoji) {
        var messageContent = document.getElementById('messageContent');
        var cursorPos = messageContent.selectionStart;
        var textBefore = messageContent.value.substring(0, cursorPos);
        var textAfter = messageContent.value.substring(cursorPos, messageContent.value.length);
        messageContent.value = textBefore + emoji + textAfter;
        messageContent.focus();
        messageContent.selectionStart = cursorPos + emoji.length;
        messageContent.selectionEnd = cursorPos + emoji.length;
        document.getElementById('emojiList').style.display = 'none';
    }
        // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ØªØ¹Ø¨ÙŠØ±ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
        document.getElementById('textButton').addEventListener('click', function () {
        var textList = document.getElementById('textList');
        textList.style.display = textList.style.display === 'block' ? 'none' : 'block';
    });
     // Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ø±Ù…Ø² Ø§Ù„ØªØ¹Ø¨ÙŠØ±ÙŠ ÙÙŠ Ø§Ù„Ù€ textarea
     function insertText(text) {
        var messageContent = document.getElementById('messageContent');
        var cursorPos = messageContent.selectionStart;
        var textBefore = messageContent.value.substring(0, cursorPos);
        var textAfter = messageContent.value.substring(cursorPos, messageContent.value.length);
        messageContent.value = textBefore + text + textAfter;
        messageContent.focus();
        messageContent.selectionStart = cursorPos + text.length;
        messageContent.selectionEnd = cursorPos + text.length;
        document.getElementById('textList').style.display = 'none';
    }
</script>

<script>
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ
    function loadMessages() {
        $.get("{% url 'load_messages' slug=room.slug %}", function(data) {
            var messagesHtml = '';

            // Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØªÙ‡ÙŠØ¦Ø© HTML Ù„Ø¹Ø±Ø¶Ù‡Ø§
            data.messages.forEach(function(message) {
                messagesHtml += '<div class="message">';
                
                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø¹Ø¶Ùˆ
                if (message.is_customer) {
                    messagesHtml += '<strong>' + message.sender + ' (Ø¹Ø¶Ùˆ):</strong>';
                } else {  // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø²Ø§Ø¦Ø±
                    messagesHtml += '<strong>' + message.sender + ' (Ø²Ø§Ø¦Ø±):</strong>';
                }

                // Ø¥Ø¶Ø§ÙØ© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                messagesHtml += '<p>' + message.content + '</p>';

                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‡Ù†Ø§Ùƒ ØµÙˆØ±Ø© Ù…Ø±ÙÙ‚Ø©ØŒ Ù†Ø¹Ø±Ø¶Ù‡Ø§
                if (message.image) {
                    messagesHtml += '<img src="' + message.image + '" alt="ØµÙˆØ±Ø© Ù…Ø±ÙÙ‚Ø©" width="100px"/>';
                }

                // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø±Ù…Ø² ØªØ¹Ø¨ÙŠØ±ÙŠØŒ Ù†Ø¹Ø±Ø¶Ù‡
                if (message.emoji) {
                    messagesHtml += '<span>' + message.emoji + '</span>';
                }

                // Ø¹Ø±Ø¶ ØªØ§Ø±ÙŠØ® Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                messagesHtml += '<br><small>' + message.created_at + '</small></div>';
            });

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø­Ø§ÙˆÙŠØ©
            $('#messages').html(messagesHtml);

            // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø£Ø³ÙÙ„ Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ù„ÙŠØ´Ø§Ù‡Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            $('#messages').scrollTop($('#messages')[0].scrollHeight);
        });
    }

    // Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ ÙƒÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ (ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©)
    setInterval(loadMessages, 5000);  // Ø¬Ù„Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙƒÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ
</script>



<script>
    // Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙƒÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ
    function loadNewMessages() {
        // Ø¬Ù„Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ± (ÙŠØ¬Ø¨ Ø£Ù† ØªØ¶Ù…Ù† API Ù„Ù‡Ø°Ø§ Ø§Ù„ØºØ±Ø¶)
        fetch('/path-to-fetch-new-messages') // Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³Ø§Ø± Ø¨Ù€ API Ø§Ù„ÙØ¹Ù„ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØ±Ø³Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            .then(response => response.json())
            .then(data => {
                const messagesContainer = document.getElementById('messages');
                // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø±Ø³Ø§Ø¦Ù„ Ø¬Ø¯ÙŠØ¯Ø©ØŒ Ø£Ø¶ÙÙ‡Ø§ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙˆÙŠØ©
                if (data.messages && data.messages.length) {
                    data.messages.forEach(message => {
                        const messageElement = document.createElement('div');
                        messageElement.classList.add('message');
                        messageElement.innerHTML = `
                            <strong>${message.user}</strong>
                            <p>${message.content}</p>
                            ${message.image ? `<img src="${message.image}" alt="ØµÙˆØ±Ø© Ù…Ø±ÙÙ‚Ø©" />` : ''}
                            <small>${message.created_at}</small>
                        `;
                        messagesContainer.insertAdjacentElement('afterbegin', messageElement);
                    });
                    scrollToBottom();  // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ø£Ø³ÙÙ„ Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                }
            })
            .catch(error => console.error('Error loading new messages:', error));
    }

    // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ø£Ø³ÙÙ„ Ø¨Ø¹Ø¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
    function scrollToBottom() {
        const messagesContainer = document.getElementById('messages');
        messagesContainer.scrollTop = messagesContainer.scrollHeight;  // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø£Ø³ÙÙ„ Ø§Ù„Ø­Ø§ÙˆÙŠØ©
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯ÙˆØ±ÙŠ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ ÙƒÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ
    setInterval(loadNewMessages, 5000); // Ø¬Ù„Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙƒÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ
</script>

<script>
    function openWindow(url) {
        // ØªØ­Ø¯ÙŠØ¯ Ø¹Ø±Ø¶ ÙˆØ§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        window.open(url, 'popupWindow', 'width=800,height=600,scrollbars=yes,resizable=yes');
    }
</script>

</body>

</html>